"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const simple_1 = require("./simple");
const uint8_array_1 = require("./uint8-array");
describe("Test simple message", () => {
    it("test simple message", () => {
        const simpleMessage = new simple_1.SimpleMessage("route-test", "type-test", {
            test: 1,
            test2: "test",
        });
        expect(simpleMessage.route()).toBe("route-test");
        expect(simpleMessage.type()).toBe("type-test");
        expect(simpleMessage.approveExternal()).toBe(true);
        expect(() => {
            simpleMessage.validateBasic();
        }).not.toThrow();
    });
    it("encoded simple message should have only datas", () => {
        const simpleMessage = new simple_1.SimpleMessage("route-test", "type-test", {
            test: 1,
            test2: "test",
        });
        const encoded = uint8_array_1.JSONUint8Array.stringify(simpleMessage);
        const decoded = uint8_array_1.JSONUint8Array.parse(encoded);
        expect(decoded["route"]).toBe(undefined);
        expect(decoded["type"]).toBe(undefined);
        expect(decoded["test"]).toBe(1);
        expect(decoded["test2"]).toBe("test");
        expect(Object.keys(decoded).length).toBe(2);
    });
});
//# sourceMappingURL=simple.spec.js.map